---
import MainLayout from "../layout/MainLayout.astro"
---

<MainLayout>
  <div class="flex items-center flex-col w-[100%]">
    <h1 class="mt-10 font-bold text-3xl text-indigo-700">It's nice to see you here!</h1>
    <form id="login-form" class="flex flex-col mt-10 p-10 border-2 border-indigo-700 rounded-3xl bg-white">
      <div class="flex justify-between mb-4">
        <label for="">Email</label>
        <input required type="text" name="email" class="ml-4 w-[200px] border border-gray-400 rounded-lg px-2">
      </div>
      <div class="flex justify-between mb-4">
        <label for="">Contrase√±a</label>
        <input required type="password" name="password" class="ml-4 w-[200px] border border-gray-400 rounded-lg px-2">
      </div>
      <div class="flex items-center justify-center mt-10">
        <button class="p-4 bg-indigo-700 border-2 border-transparent text-white hover:bg-white hover:text-indigo-700 hover:border-indigo-700 rounded-xl transition duration-300 shadow-lg shadow-indigo-500/50">Log In</button>
    </div>
    </form>
    <p class="text-sm text-right mt-6">don't have an account? <span class="text-indigo-700"><a href="/register">Register here</a></span></p>
  </div>
</MainLayout>


<script is:inline>
  const formLogin = document.getElementById('login-form')
  formLogin.addEventListener('submit'), (e) => {
    e.preventDefault()
    const users = JSON.parse(localStorage.getItem('users'))
    
    if(users ==! null) {
      const user = users.find(user => user.email === form.elements['email'].value && user.password === form.elements['password'].value)
      
      
      window.location.href = '/index'
      
    }
  }
</script>